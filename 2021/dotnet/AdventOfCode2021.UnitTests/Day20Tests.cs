using AzW.AdventOfCode2021.Year2021;
using System.Collections.Generic;
using Xunit;

namespace AdventOfCode2021.UnitTests
{
    public class Day20Tests
    {
        [Theory]
        [InlineData
            (
            "..#.#..#####.#.#.#.###.##.....###.##.#..###.####..#####..#....#..#..##..###..######.###...####..#..#####..##..#.#####...##.#.#..#.##..#.#......#.###.######.###.####...#.##.##..#..#..#####.....#.#....###..#.##......#.....#..#..#..##..#...##.######.####.####.#.#...#.......#..#.#.#...####.##.#......#..#...##.#.##..#...##.#.##..###.#......#.#.......#.#.#.####.###.##...#.....####.#..#..#.##.#....##..#.####....##...##..#...#......#.#.......#.......##..####..#...#.#.#...##..#.#..###..#####........#..####......#..#\n\n#..#.\n#....\n##..#\n..#..\n..###",
            "00101001111101010101110110000011101101001110111100111110010000100100110011100111111011100011110010011111001100101111100011010100101100101000000101110111111011101111000101101100100100111110000010100001110010110000001000001001001001100100011011111101111011110101000100000001001010100011110110100000010010001101011001000110101100111010000001010000000101010111101110110001000001111010010010110100001100101111000011000110010001000000101000000010000000110011110010001010100011001010011100111110000000010011110000001001",
            new string[] { "10010", "10000", "11001", "00100", "00111" }
            )]
        public void ParseInput(string rawInput, string expectedAlgorithm, IEnumerable<string> expectedImage)
        {
            // Arrange
            var day20 = new Day20();

            // Act
            var result = day20.ParseInput(rawInput);

            // Assert
            Assert.Equal(result.Item1, expectedAlgorithm);
            Assert.Equal(result.Item2, expectedImage);
        }

        [Theory]
        [InlineData("..#.#..#####.#.#.#.###.##.....###.##.#..###.####..#####..#....#..#..##..###..######.###...####..#..#####..##..#.#####...##.#.#..#.##..#.#......#.###.######.###.####...#.##.##..#..#..#####.....#.#....###..#.##......#.....#..#..#..##..#...##.######.####.####.#.#...#.......#..#.#.#...####.##.#......#..#...##.#.##..#...##.#.##..###.#......#.#.......#.#.#.####.###.##...#.....####.#..#..#.##.#....##..#.####....##...##..#...#......#.#.......#.......##..####..#...#.#.#...##..#.#..###..#####........#..####......#..#\n\n#..#.\n#....\n##..#\n..#..\n..###", "000100010", "1")]        
        public void ResolvePixel(string rawInput, string input, string expectedResult)
        {
            // Arrange
            var day20 = new Day20();
            day20.Input = day20.ParseInput(rawInput);

            // Act
            var result = day20.ResolvePixel(input);

            Assert.Equal(result, expectedResult);
        }

        [Theory]
        [InlineData("..#.#..#####.#.#.#.###.##.....###.##.#..###.####..#####..#....#..#..##..###..######.###...####..#..#####..##..#.#####...##.#.#..#.##..#.#......#.###.######.###.####...#.##.##..#..#..#####.....#.#....###..#.##......#.....#..#..#..##..#...##.######.####.####.#.#...#.......#..#.#.#...####.##.#......#..#...##.#.##..#...##.#.##..###.#......#.#.......#.#.#.####.###.##...#.....####.#..#..#.##.#....##..#.####....##...##..#...#......#.#.......#.......##..####..#...#.#.#...##..#.#..###..#####........#..####......#..#\n\n#..#.\n#....\n##..#\n..#..\n..###", 35)]
        public void ExecutePart1(string rawInput, long expectedResult)
        {
            // Arrange
            var day20 = new Day20();
            day20.Input = day20.ParseInput(rawInput);

            // Act
            var result = day20.ExecutePart1();

            // Assert
            Assert.Equal(expectedResult, result);
        }
    }
}
